<div class="row">

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <h3>
      Edit Sessions
    </h3>

  </div>
</div>

<div class="row">

  <!--Session name, notes-->
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">

    <!--Session name-->
    <div class="form-group">
      <input type="text" name="session-name" [(ngModel)]="session.name" class="form-control" placeholder="Name">
    </div>

    <div class="form-group">
      <!--<ng-container
        *ngIf="shifts">
        <select
          class="form-control"
          (change)="changeFunction()">
         <option *ngFor="let shiftItem of shifts" [value]="shiftItem"  [selected]="selectFunction(shiftItem)">{{shiftItem.number}}</option>
        </select>

      </ng-container>-->
    </div>

    <!--<option *ngFor="let shiftItem of shifts" [value]="shiftItem"  [selected]="selectFunction(shiftItem)">{{shiftItem.number}}</option>-->
    <div class="form-group">

      <div [ngSwitch]="this.shifts?.length>0">
        <div *ngSwitchCase="true">
          <div class="btn-group" dropdown>
            <button id="single-button" type="button" class="btn btn-default" dropdownToggle>
                {{this.session.shiftNumber? ('Shift #'+this.session.shiftNumber):"Select Shift"}} <span class="caret"></span>
            </button>
            <ul dropdownMenu role="menu" aria-labelledby="single-button">
              <ng-container *ngFor="let shiftItem of shifts">
                <li role="menuitem"><a class="dropdown-item" (click)="onLink(shiftItem)">{{shiftItem.number}}</a></li>
              </ng-container>
            </ul>
          </div>

        </div>
        <div *ngSwitchDefault>
          <strong class="text-danger">Please add shifts</strong>
        </div>

      </div>


    </div>
    <!--Session notes-->
    <div class="form-group">
      <textarea rows="3" class="form-control" placeholder="Notes" [(ngModel)]="session.notes"></textarea>
    </div>

    <div class="form-group">
      <button type="button" (click)="addSession()" class="btn btn-default">Add Session</button>
    </div>

  </div>
  <!--End session name, notes-->

  <!--Session time-->
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">

    <div class="row">
      <!--Session time from -->
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">

        <label for="_start">From</label>
        <timepicker [(ngModel)]="session.startDate" name="_start"></timepicker>


      </div>

      <!--Session time to-->
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <label for="_end">To</label>
        <timepicker [(ngModel)]="session.endDate" name="_end"></timepicker>

      </div>

    </div>

  </div>
  <!--End session time-->


  <!--Show Error-->
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div *ngIf="error" class="container">
        <div class="alert alert-danger">
          <strong>Please note!</strong>
          <ng-container *ngIf="error===1">
            <p>Session end time is less than or equal to its start time
            </p>
          </ng-container>

          <ng-container *ngIf="error===2">
            <p>Session name is required
            </p>
          </ng-container>
          <ng-container *ngIf="error===3">
            <p>Shift isn't selected
            </p>
          </ng-container>
        </div>
      </div>
    </div>

  </div>

</div>

<div class="form-group">
  <accordion>
    <accordion-group #group>
      <div accordion-heading>
        <strong>
        {{this.sessions.length}} Session{{this.sessions.length!=1?"s":""}} </strong>
        <i class="pull-right float-xs-right glyphicon" [ngClass]="{'glyphicon-chevron-down': group?.isOpen, 'glyphicon-chevron-right': !group?.isOpen}"></i>
      </div>
      <dynamic-table [items]="sessions" [propertyDisplayNames]="['Session Name','Start time','End time','Shift number']" [properties]="['name','startDate','endDate','shiftNumber']" [applyPipeProps]="[0,1,1,0]" [pipe]="pipe" [pipeArgs]="['shortTime']" (itemRemoved)="onItemRemove($event)"></dynamic-table>
    </accordion-group>
  </accordion>
</div>